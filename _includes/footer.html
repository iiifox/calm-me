<script>
// 找到所有一级标题
const headers = document.querySelectorAll("h1");

// 创建 Tab 容器
const tabContainer = document.createElement("div");
tabContainer.className = "tabs";

// 创建内容容器
const contentContainer = document.createElement("div");
contentContainer.className = "tab-contents";

// 遍历 h1
headers.forEach((h1, index) => {
  const tabId = "tab" + index;

  // 创建 Tab 按钮
  const button = document.createElement("button");
  button.className = "tab-button";
  button.dataset.tab = tabId;
  button.innerText = h1.innerText;
  if(index === 0) button.classList.add("active");
  tabContainer.appendChild(button);

  // 创建内容 div
  const contentDiv = document.createElement("div");
  contentDiv.className = "tab-content";
  if(index === 0) contentDiv.classList.add("active");

  // 将 h1 和它下面的所有内容（直到下一个 h1）移动到 contentDiv
  let sibling = h1.nextElementSibling;
  contentDiv.appendChild(h1);
  while(sibling && sibling.tagName !== "H1") {
    const next = sibling.nextElementSibling;
    contentDiv.appendChild(sibling);
    sibling = next;
  }

  contentContainer.appendChild(contentDiv);
});

// 插入页面顶部
document.body.insertBefore(tabContainer, document.body.firstChild);
document.body.insertBefore(contentContainer, tabContainer.nextSibling);

// Tab 切换逻辑
document.querySelectorAll(".tab-button").forEach(button => {
  button.addEventListener("click", () => {
    const tabId = button.dataset.tab;

    // 切换按钮
    document.querySelectorAll(".tab-button").forEach(b => b.classList.remove("active"));
    button.classList.add("active");

    // 切换内容
    document.querySelectorAll(".tab-content").forEach(tc => tc.classList.remove("active"));
    document.querySelectorAll(".tab-content")[tabId.replace("tab","")]?.classList.add("active");
  });
});
</script>
